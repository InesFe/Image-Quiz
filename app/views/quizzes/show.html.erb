<p style="color: green"><%= notice %></p>
  <% @quiz.questions.each_with_index do |question, index| %>
    <%= form_with(url: quiz_question_submissions_path(quiz_id: @quiz.id, question_id: question.id), local: true, method: :post) do |form| %>
    <%= form.hidden_field :quiz_id, value: @quiz.id %>
    <%= form.hidden_field :question_id, value: question.id %>
    
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">Question <%= index + 1 %>:</h5>
          <p class="card-text"><%= question.content %></p>
        
          <% if question.image.attached? %>
            <%= image_tag question.image, class: "img-fluid mb-3", style: "max-width: 40%; height: auto;" %>
          <% end %>
        
          <% 1.upto(3) do |answer_index| %>
            <div class="form-check">
              <%= form.radio_button "question_#{question.id}", answer_index, class: "form-check-input" %>
              <%= form.label "question_#{question.id}_#{answer_index}", question.send("answer#{answer_index}"), class: "form-check-label" %>
            </div>
          <% end %>
      </div>
    </div>
    
    <div class="actions">
      <%= form.submit "Submit Quiz", class: "btn btn-primary", data: { turbo_confirm: "Are you sure you want to submit the quiz?" } %>
    </div>
  <% end %>
<% end %>

<div>
  <%= link_to "Edit this quiz", edit_quiz_path(@quiz) %> |
  <%= link_to "Back to quizzes", quizzes_path %> |
  <%= link_to "Destroy this quiz", @quiz, method: :delete, data: { confirm: "Are you sure you want to delete this quiz?" } %>
</div>
